<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Thunderstorm Power Index (TPI) and Lightning Forecaster" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TPI and Lightning Forecaster</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #f9f9f9;
      line-height: 1.6;
    }
    h1, h2, h3 {
      text-align: center;
    }
    .calculator-container, .forecaster-container {
      max-width: 800px;
      margin: 0 auto 30px;
      background: #fff;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .factor-row {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }
    .factor-row label {
      flex: 1;
      font-weight: bold;
      margin-right: 10px;
    }
    .factor-row input, .factor-row select {
      flex: 1;
      padding: 5px;
      font-size: 1rem;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 1.1rem;
      cursor: pointer;
      background: #007BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
    }
    button:hover {
      background: #0056b3;
    }
    #result, #lightningResult {
      text-align: center;
      margin-top: 20px;
      font-size: 1.2rem;
      padding: 10px;
      background: #e3f2fd;
      border-radius: 8px;
      border: 1px solid #bbdefb;
    }
    footer {
      text-align: center;
      margin-top: 30px;
      font-size: 0.85rem;
      color: #777;
    }
  </style>
</head>
<body>

  <!-- PAGE TITLE -->
  <h1>TPI and Lightning Forecaster</h1>

  <!-- TPI Calculator -->
  <div class="calculator-container">
    <h2>TPI Calculator</h2>
    <p>Input values for storm factors to calculate the Thunderstorm Power Index (TPI).</p>

    <!-- CAPE Factor -->
    <div class="factor-row">
      <label for="capeFactor">CAPE Factor (C)</label>
      <select id="capeFactor">
        <option value="1">1 (Low CAPE: &lt;500 J/kg)</option>
        <option value="2">2 (Moderate CAPE: 500-1500 J/kg)</option>
        <option value="3">3 (High CAPE: 1500-3000 J/kg)</option>
        <option value="4">4 (Very High CAPE: 3000-4500 J/kg)</option>
        <option value="5">5 (Extreme CAPE: &gt;4500 J/kg)</option>
      </select>
    </div>

    <!-- Shear Factor -->
    <div class="factor-row">
      <label for="shearFactor">Shear Factor (S)</label>
      <select id="shearFactor">
        <option value="1">1 (Weak Shear: &lt;20 kt)</option>
        <option value="2">2 (Modest Shear: 20-35 kt)</option>
        <option value="3">3 (Decent Shear: 35-50 kt)</option>
        <option value="4">4 (Strong Shear: 50-65 kt)</option>
        <option value="5">5 (Very Strong: &gt;65 kt)</option>
      </select>
    </div>

    <button onclick="calculateTPI()">Calculate TPI</button>
    <div id="result"></div>
  </div>

  <!-- Lightning Forecaster -->
  <div class="forecaster-container">
    <h2>Lightning Forecaster</h2>
    <p>Input storm parameters to predict the probability and intensity of lightning.</p>

    <!-- CAPE -->
    <div class="factor-row">
      <label for="forecasterCAPE">CAPE (J/kg)</label>
      <input id="forecasterCAPE" type="number" placeholder="Enter CAPE (e.g., 2000)" />
    </div>

    <!-- Shear -->
    <div class="factor-row">
      <label for="forecasterShear">Shear (knots)</label>
      <input id="forecasterShear" type="number" placeholder="Enter Shear (e.g., 40)" />
    </div>

    <!-- Relative Humidity -->
    <div class="factor-row">
      <label for="forecasterRH">Relative Humidity (%)</label>
      <input id="forecasterRH" type="number" placeholder="Enter RH (e.g., 70)" />
    </div>

    <!-- Cloud Top Height -->
    <div class="factor-row">
      <label for="forecasterCloudTop">Cloud Top Height (km)</label>
      <input id="forecasterCloudTop" type="number" placeholder="Enter Height (e.g., 12)" />
    </div>

    <!-- Freezing Level -->
    <div class="factor-row">
      <label for="forecasterFreezingLevel">Freezing Level (km)</label>
      <input id="forecasterFreezingLevel" type="number" placeholder="Enter Level (e.g., 5)" />
    </div>

    <button onclick="forecastLightning()">Forecast Lightning</button>
    <div id="lightningResult"></div>
  </div>

  <!-- JavaScript -->
  <script>
    function calculateTPI() {
      const cape = parseInt(document.getElementById('capeFactor').value, 10);
      const shear = parseInt(document.getElementById('shearFactor').value, 10);
      const TPI = cape + shear;

      let interpretation = '';
      if (TPI <= 10) interpretation = 'Weak to Moderate Thunderstorm Potential';
      else if (TPI <= 15) interpretation = 'Strong Storm Potential';
      else interpretation = 'Severe Storm Potential';

      document.getElementById('result').innerHTML = `<strong>TPI = ${TPI}</strong><br>${interpretation}`;
    }

    function forecastLightning() {
      const cape = parseFloat(document.getElementById('forecasterCAPE').value);
      const shear = parseFloat(document.getElementById('forecasterShear').value);
      const rh = parseFloat(document.getElementById('forecasterRH').value);
      const cloudTop = parseFloat(document.getElementById('forecasterCloudTop').value);
      const freezingLevel = parseFloat(document.getElementById('forecasterFreezingLevel').value);

      if (isNaN(cape) || isNaN(shear) || isNaN(rh) || isNaN(cloudTop) || isNaN(freezingLevel)) {
        alert('Please fill in all fields correctly.');
        return;
      }

      // Basic simulated prediction logic
      const lightningProbability = (cape / 3000) * (shear / 50) * (rh / 100) * (cloudTop / 15) * (5 / freezingLevel);
      const intensity = Math.round(lightningProbability * 100);

      let prediction = '';
      if (intensity < 20) prediction = 'Low Lightning Risk';
      else if (intensity < 50) prediction = 'Moderate Lightning Risk';
      else prediction = 'High Lightning Risk';

      document.getElementById('lightningResult').innerHTML = `<strong>Lightning Intensity = ${intensity}%</strong><br>${prediction}`;
    }
  </script>

  <footer>
    <p>&copy; 2023 TPI and Lightning Forecaster</p>
  </footer>
</body>
</html>
