<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Thunderstorm Power Index (TPI) Calculator" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TPI Calculator</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }

    h1, h2, h3 {
      text-align: center;
    }

    .calculator-container {
      max-width: 600px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .factor-row {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }

    .factor-row label {
      flex: 1;
      font-weight: bold;
      margin-right: 10px;
    }

    .factor-row select,
    .factor-row input {
      flex: 1;
      padding: 5px;
      font-size: 1rem;
    }

    button {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 1.1rem;
      cursor: pointer;
      background: #007BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
    }

    button:hover {
      background: #0056b3;
    }

    #result {
      text-align: center;
      margin-top: 20px;
      font-size: 1.2rem;
      padding: 10px;
      background: #e3f2fd;
      border-radius: 8px;
      border: 1px solid #bbdefb;
    }

    .info-section {
      max-width: 600px;
      margin: 30px auto 0 auto;
      background: #fff;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    footer {
      text-align: center;
      margin-top: 30px;
      font-size: 0.9rem;
      color: #777;
    }

    hr {
      margin: 30px 0;
    }
  </style>
</head>
<body>
  <h1>Thunderstorm Power Index (TPI) Calculator</h1>

  <div class="calculator-container">
    <p style="text-align:center;">
      Select values (1-5) for each factor based on your assessment of the storm. Then click "Calculate TPI."
    </p>

    <!-- CAPE Factor -->
    <div class="factor-row">
      <label for="capeFactor">CAPE Factor (C)</label>
      <select id="capeFactor">
        <option value="1">1 (Low CAPE: &lt;500 J/kg)</option>
        <option value="2">2 (Moderate CAPE: 500-1500 J/kg)</option>
        <option value="3">3 (High CAPE: 1500-3000 J/kg)</option>
        <option value="4">4 (Very High CAPE: 3000-4500 J/kg)</option>
        <option value="5">5 (Extreme CAPE: &gt;4500 J/kg)</option>
      </select>
    </div>

    <!-- Shear Factor -->
    <div class="factor-row">
      <label for="shearFactor">Shear Factor (S)</label>
      <select id="shearFactor">
        <option value="1">1 (Weak Shear: &lt;20 kt)</option>
        <option value="2">2 (Modest Shear: 20-35 kt)</option>
        <option value="3">3 (Decent Shear: 35-50 kt)</option>
        <option value="4">4 (Strong Shear: 50-65 kt)</option>
        <option value="5">5 (Very Strong: &gt;65 kt)</option>
      </select>
    </div>

    <!-- Lightning Factor -->
    <div class="factor-row">
      <label for="lightningFactor">Lightning Factor (L)</label>
      <select id="lightningFactor">
        <option value="1">1 (Occasional Flash)</option>
        <option value="2">2 (Steady, ~5-15/min)</option>
        <option value="3">3 (Frequent, 15-30/min)</option>
        <option value="4">4 (Very Frequent, 30-45/min)</option>
        <option value="5">5 (Intense Barrage, &gt;45/min)</option>
      </select>
    </div>

    <!-- Updraft Strength Factor -->
    <div class="factor-row">
      <label for="updraftFactor">Updraft Strength (U)</label>
      <select id="updraftFactor">
        <option value="1">1 (Weak Updraft)</option>
        <option value="2">2 (Modest Updraft)</option>
        <option value="3">3 (Strong Updraft)</option>
        <option value="4">4 (Very Strong Updraft)</option>
        <option value="5">5 (Extreme Updraft / Rotation)</option>
      </select>
    </div>

    <!-- Precipitation Core Factor -->
    <div class="factor-row">
      <label for="precipFactor">Precip. Core (P)</label>
      <select id="precipFactor">
        <option value="1">1 (&lt;55 dBZ)</option>
        <option value="2">2 (55-60 dBZ)</option>
        <option value="3">3 (60-65 dBZ)</option>
        <option value="4">4 (65-70 dBZ)</option>
        <option value="5">5 (&gt;70 dBZ)</option>
      </select>
    </div>

    <button onclick="calculateTPI()">Calculate TPI</button>

    <div id="result"></div>
  </div>

  <hr />

  <div class="info-section">
    <h2>How the TPI Works</h2>
    <p>
      The <strong>Thunderstorm Power Index (TPI)</strong> is a simple way to summarize a thunderstorm's potential strength.
      It combines five factors—<em>CAPE, Shear, Lightning, Updraft Strength, and Precipitation Core</em>—to produce a
      single value from 5 (weak) to 25 (extreme).
    </p>
    <ul>
      <li><strong>CAPE (Convective Available Potential Energy)</strong>: Measures the buoyant energy available to fuel thunderstorm updrafts.</li>
      <li><strong>Wind Shear (Vertical Shear / Storm-Relative Helicity)</strong>: Determines how organized and long-lived a thunderstorm can become.</li>
      <li><strong>Lightning Frequency</strong>: An indicator of storm vigor and active updrafts.</li>
      <li><strong>Updraft Strength</strong>: Reflects hail potential, storm rotation, or overall vertical motion in the storm.</li>
      <li><strong>Precipitation Core (Reflectivity)</strong>: High reflectivity often signifies intense rain or hail.</li>
    </ul>

    <h3>Where to Get the Data</h3>
    <p><strong>Hobbyist/Field Observation:</strong></p>
    <ul>
      <li>
        <strong>CAPE</strong>: Check local forecast discussions or free weather apps that provide approximate CAPE.  
        Look for phrases like "moderate instability" or “CAPE ~2000 J/kg” in National Weather Service (NWS) discussions (U.S.) or equivalent agencies in your country.
      </li>
      <li>
        <strong>Shear</strong>: Again, local forecast discussions often mention “weak,” “moderate,” or “strong” shear. You can also check sites like the <em>Storm Prediction Center Mesoscale Analysis</em>.
      </li>
      <li>
        <strong>Lightning</strong>: Many free sites (e.g., Blitzortung, LightningMaps.org) or phone apps let you see approximate lightning rates.
      </li>
      <li>
        <strong>Updraft Strength</strong>: Look for signs of hail (crowdsourced reports, social media), very rapid cloud growth, or strong outflow winds. Some radar apps also show echo tops.
      </li>
      <li>
        <strong>Precipitation Core</strong>: Free radar sites or apps (e.g., Weather Underground, RadarScope) show reflectivity values in dBZ. Compare the color scale to approximate the 1–5 score.
      </li>
    </ul>

    <p><strong>Professional or Advanced Sources:</strong></p>
    <ul>
      <li>
        <strong>CAPE</strong>: Exact readings from weather balloons (soundings) or high-resolution forecast models (like the HRRR in the U.S.).
      </li>
      <li>
        <strong>Shear</strong>: 0–6 km bulk shear or storm-relative helicity from model data or mesoanalysis pages.
      </li>
      <li>
        <strong>Lightning</strong>: Real-time lightning detection networks (Vaisala, Earth Networks, etc.) or satellite-based lightning mappers.
      </li>
      <li>
        <strong>Updraft Strength</strong>: Updraft Helicity (UH) from high-res models or Doppler radar velocity data for supercell rotation.
      </li>
      <li>
        <strong>Precip. Core</strong>: Max reflectivity, VIL (Vertically Integrated Liquid), or dual-pol radar signatures for hail detection.
      </li>
    </ul>

    <h3>Interpreting the TPI Value</h3>
    <p>After you select each factor (1 to 5) and click "Calculate TPI," you get a total score between 5 and 25:</p>
    <ul>
      <li><strong>5–10:</strong> Weak to Moderate Thunderstorm Potential</li>
      <li><strong>11–15:</strong> Strong Storm Potential (could be locally severe)</li>
      <li><strong>16–20:</strong> Severe Storm Potential (large hail, damaging winds, maybe tornadoes)</li>
      <li><strong>21–25:</strong> Extreme Storm Potential (significant severe threat)</li>
    </ul>
    <p>This is a simplified index—thunderstorms can change quickly, and local conditions can vary. Always follow official forecasts and warnings.</p>
  </div>

  <footer>
    Created by <strong>YourName</strong> — hosted on GitHub Pages
  </footer>

  <script>
    function calculateTPI() {
      // Get selected values
      const cape = parseInt(document.getElementById('capeFactor').value, 10);
      const shear = parseInt(document.getElementById('shearFactor').value, 10);
      const lightning = parseInt(document.getElementById('lightningFactor').value, 10);
      const updraft = parseInt(document.getElementById('updraftFactor').value, 10);
      const precip = parseInt(document.getElementById('precipFactor').value, 10);

      // Sum them
      const TPI = cape + shear + lightning + updraft + precip;

      // Basic interpretation logic
      let interpretation = '';
      if (TPI <= 10) {
        interpretation = 'Weak to Moderate Thunderstorm Potential';
      } else if (TPI <= 15) {
        interpretation = 'Strong Storm Potential (could be locally severe)';
      } else if (TPI <= 20) {
        interpretation = 'Severe Storm Potential (large hail, damaging winds, maybe tornadoes)';
      } else {
        interpretation = 'Extreme Storm Potential (significant severe threat)';
      }

      // Display result
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `
        <strong>TPI = ${TPI}</strong><br />
        <em>${interpretation}</em>
      `;
    }
  </script>
</body>
</html>
