<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Thunderstorm Power Index (TPI) Calculator with Detailed Scoring" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TPI Calculator (Field & Pro, Metric & Imperial)</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }

    h1, h2, h3, h4 {
      text-align: center;
    }

    .calculator-container, .info-section {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .factor-row {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }

    .factor-row label {
      flex: 1;
      font-weight: bold;
      margin-right: 10px;
    }

    .factor-row select {
      flex: 1;
      padding: 5px;
      font-size: 1rem;
    }

    button {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 1.1rem;
      cursor: pointer;
      background: #007BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
    }

    button:hover {
      background: #0056b3;
    }

    #result {
      text-align: center;
      margin-top: 20px;
      font-size: 1.2rem;
      padding: 10px;
      background: #e3f2fd;
      border-radius: 8px;
      border: 1px solid #bbdefb;
    }

    .info-section {
      margin-top: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
    }

    table th, table td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
      font-size: 0.95rem;
    }

    footer {
      text-align: center;
      margin-top: 30px;
      font-size: 0.9rem;
      color: #777;
    }

    hr {
      margin: 30px 0;
    }

    .subtitle {
      text-align: center;
      font-style: italic;
      margin-bottom: 10px;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>Thunderstorm Power Index (TPI) Calculator</h1>
  <p class="subtitle">Field &amp; Pro Guidance | Metric &amp; Imperial Units</p>

  <!-- CALCULATOR CONTAINER -->
  <div class="calculator-container">
    <p style="text-align:center;">
      Select values <strong>(1-5)</strong> for each factor based on your assessment of the storm.  
      Then click <strong>"Calculate TPI"</strong>.
    </p>

    <!-- CAPE Factor -->
    <div class="factor-row">
      <label for="capeFactor">CAPE Factor (C)</label>
      <select id="capeFactor">
        <option value="1">1 (Low CAPE: &lt;500 J/kg)</option>
        <option value="2">2 (Moderate CAPE: 500-1500 J/kg)</option>
        <option value="3">3 (High CAPE: 1500-3000 J/kg)</option>
        <option value="4">4 (Very High CAPE: 3000-4500 J/kg)</option>
        <option value="5">5 (Extreme CAPE: &gt;4500 J/kg)</option>
      </select>
    </div>

    <!-- Shear Factor -->
    <div class="factor-row">
      <label for="shearFactor">Shear Factor (S)</label>
      <select id="shearFactor">
        <option value="1">1 (Weak Shear: &lt;20 kt)</option>
        <option value="2">2 (Modest Shear: 20-35 kt)</option>
        <option value="3">3 (Decent Shear: 35-50 kt)</option>
        <option value="4">4 (Strong Shear: 50-65 kt)</option>
        <option value="5">5 (Very Strong: &gt;65 kt)</option>
      </select>
    </div>

    <!-- Lightning Factor -->
    <div class="factor-row">
      <label for="lightningFactor">Lightning Factor (L)</label>
      <select id="lightningFactor">
        <option value="1">1 (Occasional Flash)</option>
        <option value="2">2 (Steady, ~5-15/min)</option>
        <option value="3">3 (Frequent, 15-30/min)</option>
        <option value="4">4 (Very Frequent, 30-45/min)</option>
        <option value="5">5 (Intense Barrage, &gt;45/min)</option>
      </select>
    </div>

    <!-- Updraft Strength Factor -->
    <div class="factor-row">
      <label for="updraftFactor">Updraft Strength (U)</label>
      <select id="updraftFactor">
        <option value="1">1 (Weak Updraft)</option>
        <option value="2">2 (Modest Updraft)</option>
        <option value="3">3 (Strong Updraft)</option>
        <option value="4">4 (Very Strong Updraft)</option>
        <option value="5">5 (Extreme Updraft / Rotation)</option>
      </select>
    </div>

    <!-- Precipitation Core Factor -->
    <div class="factor-row">
      <label for="precipFactor">Precip. Core (P)</label>
      <select id="precipFactor">
        <option value="1">1 (&lt;55 dBZ)</option>
        <option value="2">2 (55-60 dBZ)</option>
        <option value="3">3 (60-65 dBZ)</option>
        <option value="4">4 (65-70 dBZ)</option>
        <option value="5">5 (&gt;70 dBZ)</option>
      </select>
    </div>

    <!-- Calculate Button -->
    <button onclick="calculateTPI()">Calculate TPI</button>

    <!-- Result Display -->
    <div id="result"></div>
  </div>

  <hr />

  <!-- INFO SECTION -->
  <div class="info-section">
    <h2>How the TPI Works</h2>
    <p>
      The <strong>Thunderstorm Power Index (TPI)</strong> is a simple way to estimate a storm’s potential strength.  
      It combines five factors—<em>CAPE, Wind Shear, Lightning, Updraft Strength, and Precipitation Core</em>—into  
      a single value from <strong>5</strong> (weak) to <strong>25</strong> (extreme). Below are detailed scoring  
      guidelines for both <em>field/hobbyist</em> and <em>professional</em> approaches, including metric and  
      imperial units.
    </p>

    <h3>Interpretation of Final TPI Score</h3>
    <ul>
      <li><strong>5–10:</strong> Weak to Moderate Thunderstorm Potential</li>
      <li><strong>11–15:</strong> Strong Storm Potential (could be locally severe)</li>
      <li><strong>16–20:</strong> Severe Storm Potential (large hail, damaging winds, maybe tornadoes)</li>
      <li><strong>21–25:</strong> Extreme Storm Potential (significant severe threat)</li>
    </ul>
    <p>Even low scores can still produce hazardous weather (e.g., lightning, localized flooding). Always follow <strong>official forecasts and warnings</strong>.</p>

    <h2>1. CAPE (Convective Available Potential Energy)</h2>
    <ul>
      <li><strong>Field/Hobbyist:</strong> Look for phrases like “moderate instability” or approximate CAPE values in local forecasts or weather apps.</li>
      <li><strong>Professional:</strong> Use weather balloon soundings or high-resolution model data (HRRR, ACCESS, etc.).</li>
    </ul>
    <table>
      <thead>
        <tr>
          <th>Score (C)</th>
          <th>CAPE Range (J/kg)</th>
          <th>Typical Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>&lt; 500</td>
          <td>Very low (isolated weak storms)</td>
        </tr>
        <tr>
          <td>2</td>
          <td>500–1500</td>
          <td>Low to moderate instability</td>
        </tr>
        <tr>
          <td>3</td>
          <td>1500–3000</td>
          <td>High (strong storms likely)</td>
        </tr>
        <tr>
          <td>4</td>
          <td>3000–4500</td>
          <td>Very high (severe storms probable)</td>
        </tr>
        <tr>
          <td>5</td>
          <td>&gt; 4500</td>
          <td>Extreme (explosive storms possible)</td>
        </tr>
      </tbody>
    </table>

    <h2>2. Wind Shear (S)</h2>
    <ul>
      <li><strong>Field/Hobbyist:</strong> Forecast discussions often say “weak,” “moderate,” or “strong” shear. You can also see approximate values on <em>SPC Mesoscale Analysis</em> (U.S.) or local weather agencies.</li>
      <li><strong>Professional:</strong> 0–6 km bulk shear in knots (kt) or m/s from model data, or storm-relative helicity (SRH). More shear = more organized storms.</li>
    </ul>
    <p><em>Note:</em> 1 knot (kt) ≈ 1.15 mph ≈ 1.85 km/h. So 20 kt ~ 23 mph ~ 37 km/h, 50 kt ~ 58 mph ~ 93 km/h.</p>
    <table>
      <thead>
        <tr>
          <th>Score (S)</th>
          <th>Shear (knots)</th>
          <th>Approx. mph</th>
          <th>Approx. km/h</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>&lt; 20</td>
          <td>&lt; 23 mph</td>
          <td>&lt; 37 km/h</td>
          <td>Weak Shear</td>
        </tr>
        <tr>
          <td>2</td>
          <td>20–35</td>
          <td>23–40 mph</td>
          <td>37–65 km/h</td>
          <td>Modest</td>
        </tr>
        <tr>
          <td>3</td>
          <td>35–50</td>
          <td>40–58 mph</td>
          <td>65–93 km/h</td>
          <td>Decent/Moderate</td>
        </tr>
        <tr>
          <td>4</td>
          <td>50–65</td>
          <td>58–75 mph</td>
          <td>93–120 km/h</td>
          <td>Strong</td>
        </tr>
        <tr>
          <td>5</td>
          <td>&gt; 65</td>
          <td>&gt; 75 mph</td>
          <td>&gt; 120 km/h</td>
          <td>Very Strong</td>
        </tr>
      </tbody>
    </table>

    <h2>3. Lightning (L)</h2>
    <ul>
      <li><strong>Field/Hobbyist:</strong> Check free apps (e.g., Blitzortung, LightningMaps.org) for approximate flashes/min, or estimate visually (flashes every few seconds).</li>
      <li><strong>Professional:</strong> Use lightning detection networks or satellite-based mappers for precise flash rates.</li>
    </ul>
    <table>
      <thead>
        <tr>
          <th>Score (L)</th>
          <th>Lightning Frequency</th>
          <th>Approx. Flashes/Minute</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>Occasional flash, big quiet gaps</td>
          <td>&lt; 5</td>
        </tr>
        <tr>
          <td>2</td>
          <td>Steady, not rapid</td>
          <td>5–15</td>
        </tr>
        <tr>
          <td>3</td>
          <td>Frequent (flashes every few secs)</td>
          <td>15–30</td>
        </tr>
        <tr>
          <td>4</td>
          <td>Very frequent “almost continuous”</td>
          <td>30–45</td>
        </tr>
        <tr>
          <td>5</td>
          <td>Intense barrage “strobe effect”</td>
          <td>&gt; 45</td>
        </tr>
      </tbody>
    </table>

    <h2>4. Updraft Strength (U)</h2>
    <ul>
      <li><strong>Field/Hobbyist:</strong> Look for hail reports, strong outflow winds, very rapid tower growth. If radar apps show tall echo tops, that’s another clue.</li>
      <li><strong>Professional:</strong> Updraft Helicity (UH) from hi-res models, Doppler velocity for supercell rotation, or large hail signatures.</li>
    </ul>
    <p>Use hail sizes in <strong>inches/cm</strong> to guess updraft power. For reference:  
       1" ~ 2.5 cm, 1.5" ~ 3.8 cm, 2" ~ 5.1 cm, 2.5" ~ 6.4 cm, etc.</p>
    <table>
      <thead>
        <tr>
          <th>Score (U)</th>
          <th>Field Clues (Imperial &amp; Metric Hail)</th>
          <th>Potential Updraft Strength</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>No hail or very tiny (&lt;0.5"/&lt;1.3 cm)</td>
          <td>Weak, minimal vertical motion</td>
        </tr>
        <tr>
          <td>2</td>
          <td>Small hail (0.5–1.0" / ~1.3–2.5 cm)</td>
          <td>Modest updraft, short-lived storms</td>
        </tr>
        <tr>
          <td>3</td>
          <td>Hail ~1.0–1.5" (~2.5–3.8 cm)</td>
          <td>Strong updraft, possible supercell</td>
        </tr>
        <tr>
          <td>4</td>
          <td>Hail 1.5–2.5" (~3.8–6.4 cm)</td>
          <td>Very strong, significant severe threat</td>
        </tr>
        <tr>
          <td>5</td>
          <td>Hail &gt;2.5" (&gt;6.4 cm)</td>
          <td>Extreme updraft / rotation likely</td>
        </tr>
      </tbody>
    </table>

    <h2>5. Precipitation Core (P)</h2>
    <ul>
      <li><strong>Field/Hobbyist:</strong> Use free radar apps (e.g., Weather Underground, RadarScope) to see reflectivity. Compare with color scale to approximate dBZ.</li>
      <li><strong>Professional:</strong> Use advanced radar products (dual-pol, VIL, etc.). Values &gt;65 dBZ often indicate large hail.</li>
    </ul>
    <table>
      <thead>
        <tr>
          <th>Score (P)</th>
          <th>Reflectivity (dBZ)</th>
          <th>Typical Radar Appearance</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>&lt; 55</td>
          <td>Green/Yellow (moderate rain)</td>
        </tr>
        <tr>
          <td>2</td>
          <td>55–60</td>
          <td>Orange/Red (heavy rain)</td>
        </tr>
        <tr>
          <td>3</td>
          <td>60–65</td>
          <td>Dark Red (very heavy, small hail)</td>
        </tr>
        <tr>
          <td>4</td>
          <td>65–70</td>
          <td>Purple/White (likely hail)</td>
        </tr>
        <tr>
          <td>5</td>
          <td>&gt; 70</td>
          <td>Extreme (strong hail core)</td>
        </tr>
      </tbody>
    </table>

    <h3>Measurement Conversions</h3>
    <ul>
      <li><strong>Knots to mph/km/h:</strong> 1 kt ≈ 1.15 mph ≈ 1.85 km/h</li>
      <li><strong>Hail size:</strong> 1 inch = 2.54 cm</li>
      <li><strong>CAPE:</strong> Measured in J/kg (no direct imperial equivalent, but used worldwide)</li>
    </ul>

    <p>
      By combining (C) CAPE + (S) Shear + (L) Lightning + (U) Updraft + (P) Precip,  
      you get a <strong>TPI score</strong> from <strong>5 to 25</strong>. Use the detailed tables  
      above to pick the best number (1–5) for each factor based on your available data.
    </p>
  </div>

  <footer>
    Created by <strong>YourName</strong> — Field &amp; Pro Guidance (Metric &amp; Imperial) — Hosted on GitHub Pages
  </footer>

  <script>
    function calculateTPI() {
      // Get selected values
      const cape = parseInt(document.getElementById('capeFactor').value, 10);
      const shear = parseInt(document.getElementById('shearFactor').value, 10);
      const lightning = parseInt(document.getElementById('lightningFactor').value, 10);
      const updraft = parseInt(document.getElementById('updraftFactor').value, 10);
      const precip = parseInt(document.getElementById('precipFactor').value, 10);

      // Sum them
      const TPI = cape + shear + lightning + updraft + precip;

      // Basic interpretation logic
      let interpretation = '';
      if (TPI <= 10) {
        interpretation = 'Weak to Moderate Thunderstorm Potential';
      } else if (TPI <= 15) {
        interpretation = 'Strong Storm Potential (could be locally severe)';
      } else if (TPI <= 20) {
        interpretation = 'Severe Storm Potential (large hail, damaging winds, maybe tornadoes)';
      } else {
        interpretation = 'Extreme Storm Potential (significant severe threat)';
      }

      // Display result
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `
        <strong>TPI = ${TPI}</strong><br />
        <em>${interpretation}</em>
      `;
    }
  </script>
</body>
</html>
